# note.com 対応書式リファレンス

note.com のエディタおよびAPIが受け付けるHTMLはMarkdownのサブセットに相当する。
本文（`body`）フィールドにはHTML文字列を渡す。

## 対応要素

| 要素 | HTMLタグ | Markdown記法 | 備考 |
|------|----------|-------------|------|
| 大見出し | `<h2>` | `## ` | h1 は h2 に変換される |
| 小見出し | `<h3>` | `### ` | h4〜h6 は h3 に変換される |
| 段落 | `<p>` | （そのまま） | |
| 太字 | `<b>` | `**text**` | |
| 斜体 | `<em>` | `*text*` | |
| 取り消し線 | `<s>` | `~~text~~` | |
| 引用 | `<blockquote><p>` | `> ` | blockquote 内は p で囲む |
| コードブロック | `<pre>` | ` ``` ` | 言語指定は無視される |
| 箇条書き | `<ul><li>` | `- ` | |
| 番号付きリスト | `<ol><li>` | `1. ` | |
| 区切り線 | `<hr>` | `---` | |
| リンク | `<a href="...">` | `[text](url)` | |
| 画像 | `<img src="...">` | `![alt](url)` | 外部URL可。アップロードAPIも別途あり |

## 非対応要素

| 要素 | 備考 |
|------|------|
| テーブル (`<table>`) | 完全に非対応 |
| h1 | API経由では h2 に変換 |
| h4, h5, h6 | API経由では h3 に変換 |
| インラインコード (`<code>`) | ブロックレベルの `<pre>` のみ対応 |
| ネストしたリスト | フラットなリストのみ |
| 脚注 | 非対応 |
| 定義リスト (`<dl>`) | 非対応 |

## API body フォーマット例

```html
<h2>見出し</h2>
<p>段落テキスト。<b>太字</b>や<em>斜体</em>も使える。</p>
<blockquote><p>引用文</p></blockquote>
<ul><li>項目1</li><li>項目2</li></ul>
<ol><li>番号1</li><li>番号2</li></ol>
<pre>console.log("code block");</pre>
<hr>
<p><a href="https://example.com">リンク</a></p>
```

## Markdown→HTML変換時の注意

1. **見出しレベルの正規化**: h1→h2、h4〜h6→h3 に変換すること
2. **テーブルの除去**: Markdownにテーブルがあった場合は除去またはプレーンテキスト化
3. **インラインコードの扱い**: `` `code` `` はそのままテキストとして残す（タグ変換しない）
4. **コードブロックの言語指定**: ` ```js ` の言語部分は除去し `<pre>` のみにする
5. **ネストリストのフラット化**: 入れ子リストはトップレベルに展開する

## 参考

- [noteで使えるマークダウン記法まとめ](https://note.com/akihamitsuki/n/nc7fdbff15bc8)
- [noteで実装不可のHTMLタグと理想の見出し構造](https://note.com/m_y_s/n/nb6263ad3488f)
- [Markdownショートカット – noteヘルプセンター](https://www.help-note.com/hc/ja/articles/4410617032217)
